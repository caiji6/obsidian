# 👌动态代理常用的两种方式？

# 口语化回答
好的，面试官，动态常见的两种，一种是 jdk 动态代理，一种是 cglib 动态代理，两者的最主要区别是 jdk 动态代理主要是依赖于接口创建代理对象，cglib 是通过生成子类的方式，不需要接口，两种经常会在一起配合，假设类没有接口的时候，就可以通过 cglib 来弥补不足。从性能上来看，因为 jdk 使用反射机制，他的性能，相比 cglib 稍有逊色。cglib 会更占用内存一些。两者都可以满足各种需求，按照有没有接口的原则进行选择。以上。

# 题目解析
常考题，两种方式非常清晰，大家要记住的是两种所适应的场景，有没有接口的一个区别，这道题后面，经常就会引入出来，spring 用的是什么。

# 面试得分点
jdk 动态代理，cglib，有无接口，子类

# 题目详细答案
动态代理常用的两种方式是基于接口的动态代理（JDK 动态代理）和基于类的动态代理（CGLIB 动态代理）。

## JDK 动态代理
JDK 动态代理是 Java 标准库提供的一种动态代理机制，它依赖于接口来创建代理对象。JDK 动态代理通过java.lang.reflect.Proxy类和java.lang.reflect.InvocationHandler接口实现。当你有一个接口并希望为该接口的实现类创建代理时，可以使用 JDK 动态代理。

## CGLIB 动态代理
CGLIB（Code Generation Library）是一个强大的高性能代码生成库，它通过生成子类的方式来为目标类创建代理对象。CGLIB 动态代理不需要接口，可以直接代理类。当你没有接口，只有具体类时，可以使用 CGLIB 动态代理。

## 比较
**依赖性**：

JDK 动态代理依赖于接口，如果没有接口就无法使用。

CGLIB 动态代理可以直接代理类，不需要接口。

**性能**：

JDK 动态代理由于需要通过反射调用方法，性能可能会有所影响。

CGLIB 动态代理通过生成字节码来创建代理类，性能通常比 JDK 动态代理更高，但生成字节码的过程会稍微多占用一些内存。

**使用场景**：

JDK 动态代理适用于有接口的情况，适用于大多数常见的业务场景。

CGLIB 动态代理适用于没有接口的情况，适用于需要代理大量具体类的场景。



> 原文: <https://www.yuque.com/jingdianjichi/xyxdsi/pliugi85pxxhti0h>