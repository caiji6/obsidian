# A,B,C三个字段组成联合索引，AB,AC,BC三种情况下查询是否能命中索引？

# 题目详细答案
在数据库中，联合索引（也称为复合索引）是由多个列组成的单个索引。假设我们有一个包含字段 A、B 和 C 的联合索引(A, B, C)，我们来分析在不同情况下查询是否能命中索引。

## 联合索引的基本原则
1. **最左前缀原则**：联合索引会按照定义的字段顺序进行排序。查询必须从联合索引的最左边开始，才能利用索引。
2. **连续性原则**：如果跳过了联合索引中的某个字段，那么索引在跳过的字段之后就无法继续利用。

## 查询情况分析
假设我们有一个联合索引(A, B, C)，我们来分析以下几种查询情况是否能命中索引：

#### 1. 查询条件为(A, B)
```plain
SELECT * FROM table WHERE A = ? AND B = ?;
```

**能命中索引**：这个查询条件从最左边开始使用联合索引的前两个字段(A, B)，因此可以利用索引。

#### 2. 查询条件为(A, C)
```plain
SELECT * FROM table WHERE A = ? AND C = ?;
```

**能部分命中索引**：查询条件包含了联合索引的第一个字段A，因此可以利用索引来查找A的值。但是，由于跳过了字段B，对于字段C的查询将无法继续利用索引。

#### 3. 查询条件为(B, C)
```plain
SELECT * FROM table WHERE B = ? AND C = ?;
```

**不能命中索引**：查询条件没有从联合索引的最左边字段A开始，因此不能利用联合索引(A, B, C)。

## 其他查询情况
#### 4. 查询条件为(A)
```plain
SELECT * FROM table WHERE A = ?;
```

**能命中索引**：查询条件只包含了联合索引的第一个字段A，可以完全利用索引。

#### 5. 查询条件为(B)
```plain
SELECT * FROM table WHERE B = ?;
```

**不能命中索引**：查询条件没有包含联合索引的最左边字段A，因此不能利用联合索引(A, B, C)。

#### 6. 查询条件为(A, B, C)
```plain
SELECT * FROM table WHERE A = ? AND B = ? AND C = ?;
```

**能命中索引**：查询条件包含了联合索引的所有字段(A, B, C)，可以完全利用索引。

## 总结
| 查询条件 | 是否命中索引 | 说明 |
| --- | --- | --- |
| (A, B) | 是 | 完全匹配联合索引的前缀部分。 |
| (A) | 是 | 只使用了联合索引的第一列，可以命中。 |
| (A, B, C) | 是 | 完全匹配整个联合索引。 |
| (A, C) | 部分 | 能够利用索引中A的部分，但C不在B之后直接出现，因此只能部分利用索引。 |
| (B, C) | 否 | 没有从最左边开始连续匹配索引定义，故无法利用索引。 |
| (B) | 否 | 未包含联合索引中最左侧的列A，所以不能利用索引。 |




> 原文: <https://www.yuque.com/jingdianjichi/xyxdsi/xbyg0idxybt2klr6>