# ğŸ‘Œç»ˆæ­¢çº¿ç¨‹çš„å››ç§æ–¹å¼

# é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ
## æ­£å¸¸ç»ˆæ­¢
çº¿ç¨‹çš„run()æ–¹æ³•æ‰§è¡Œå®Œæ¯•åï¼Œçº¿ç¨‹ä¼šè‡ªåŠ¨ç»ˆæ­¢ã€‚è¿™æ˜¯æœ€è‡ªç„¶å’Œå®‰å…¨çš„ç»ˆæ­¢æ–¹å¼ã€‚

```plain
public class MyRunnable implements Runnable {
    public void run() {
        System.out.println("Thread is running");
        // çº¿ç¨‹æ­£å¸¸æ‰§è¡Œå®Œæ¯•åç»ˆæ­¢
    }

    public static void main(String[] args) {
        Thread thread = new Thread(new MyRunnable());
        thread.start();
    }
}
```

## ä½¿ç”¨æ ‡å¿—ä½ç»ˆæ­¢
é€šè¿‡è®¾ç½®ä¸€ä¸ªå…±äº«çš„æ ‡å¿—ä½æ¥é€šçŸ¥çº¿ç¨‹ç»ˆæ­¢ã€‚è¿™ç§æ–¹å¼éœ€è¦çº¿ç¨‹åœ¨åˆé€‚çš„åœ°æ–¹æ£€æŸ¥æ ‡å¿—ä½ï¼Œå¹¶è‡ªè¡Œå†³å®šä½•æ—¶ç»ˆæ­¢ã€‚

```plain
public class MyRunnable implements Runnable {
    private volatile boolean running = true;

    public void run() {
        while (running) {
            System.out.println("Thread is running");
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt(); // é‡æ–°è®¾ç½®ä¸­æ–­çŠ¶æ€
            }
        }
    }

    public void stop() {
        running = false;
    }

    public static void main(String[] args) throws InterruptedException {
        MyRunnable myRunnable = new MyRunnable();
        Thread thread = new Thread(myRunnable);
        thread.start();

        Thread.sleep(5000); // è®©çº¿ç¨‹è¿è¡Œä¸€æ®µæ—¶é—´
        myRunnable.stop(); // è¯·æ±‚çº¿ç¨‹ç»ˆæ­¢
    }
}
```

## ä½¿ç”¨interrupt()æ–¹æ³•
é€šè¿‡è°ƒç”¨çº¿ç¨‹çš„interrupt()æ–¹æ³•æ¥è¯·æ±‚ç»ˆæ­¢çº¿ç¨‹ã€‚çº¿ç¨‹éœ€è¦åœ¨åˆé€‚çš„åœ°æ–¹æ£€æŸ¥æ˜¯å¦è¢«ä¸­æ–­ï¼Œå¹¶è‡ªè¡Œå†³å®šå¦‚ä½•å¤„ç†ã€‚

```plain
public class MyRunnable implements Runnable {
    public void run() {
        while (!Thread.currentThread().isInterrupted()) {
            System.out.println("Thread is running");
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt(); // é‡æ–°è®¾ç½®ä¸­æ–­çŠ¶æ€
                break; // è·³å‡ºå¾ªç¯ï¼Œç»ˆæ­¢çº¿ç¨‹
            }
        }
    }

    public static void main(String[] args) throws InterruptedException {
        Thread thread = new Thread(new MyRunnable());
        thread.start();

        Thread.sleep(5000); // è®©çº¿ç¨‹è¿è¡Œä¸€æ®µæ—¶é—´
        thread.interrupt(); // è¯·æ±‚çº¿ç¨‹ç»ˆæ­¢
    }
}
```

## ç”¨Futureçš„å–æ¶ˆæ–¹æ³•
å¦‚æœçº¿ç¨‹æ˜¯é€šè¿‡ExecutorServiceæäº¤çš„ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨Futureå¯¹è±¡çš„cancel()æ–¹æ³•æ¥è¯·æ±‚ç»ˆæ­¢çº¿ç¨‹ã€‚

```plain
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;

public class MyRunnable implements Runnable {
    public void run() {
        while (!Thread.currentThread().isInterrupted()) {
            System.out.println("Thread is running");
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt(); // é‡æ–°è®¾ç½®ä¸­æ–­çŠ¶æ€
                break; // è·³å‡ºå¾ªç¯ï¼Œç»ˆæ­¢çº¿ç¨‹
            }
        }
    }

    public static void main(String[] args) throws InterruptedException {
        ExecutorService executor = Executors.newSingleThreadExecutor();
        Future<?> future = executor.submit(new MyRunnable());

        Thread.sleep(5000); // è®©çº¿ç¨‹è¿è¡Œä¸€æ®µæ—¶é—´
        future.cancel(true); // è¯·æ±‚çº¿ç¨‹ç»ˆæ­¢

        executor.shutdown();
    }
}
```



è¿™å››ç§æ–¹å¼ä¸­ï¼Œæ­£å¸¸ç»ˆæ­¢å’Œä½¿ç”¨æ ‡å¿—ä½æ˜¯æœ€æ¨èçš„ï¼Œå› ä¸ºå®ƒä»¬æœ€ä¸ºå®‰å…¨å’Œå¯æ§ã€‚ä½¿ç”¨interrupt()æ–¹æ³•ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„æ–¹å¼ï¼Œä½†éœ€è¦æ³¨æ„æ­£ç¡®å¤„ç†InterruptedExceptionã€‚ä½¿ç”¨Futureçš„å–æ¶ˆæ–¹æ³•é€‚ç”¨äºé€šè¿‡ExecutorServiceæäº¤çš„ä»»åŠ¡ï¼Œä½†ä»ç„¶éœ€è¦ä»»åŠ¡åœ¨åˆé€‚çš„åœ°æ–¹å“åº”ä¸­æ–­è¯·æ±‚ã€‚å¼ºåˆ¶ç»ˆæ­¢çº¿ç¨‹ï¼ˆä¾‹å¦‚ä½¿ç”¨Thread.stop()ï¼‰æ˜¯ä¸æ¨èçš„ï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´èµ„æºæ³„æ¼å’Œæ•°æ®ä¸ä¸€è‡´ã€‚



> åŸæ–‡: <https://www.yuque.com/jingdianjichi/xyxdsi/rvdxtci9ox01gpgr>