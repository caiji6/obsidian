# ğŸ‘Œå¦‚ä½•é‡æ„ä¸€ä¸ªçº¿ç¨‹å·¥å‚

# é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ
## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹å·¥å‚
**ç»Ÿä¸€ç®¡ç†çº¿ç¨‹åˆ›å»º**ï¼šé€šè¿‡é›†ä¸­ç®¡ç†çº¿ç¨‹çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå¯ä»¥ç¡®ä¿æ‰€æœ‰çº¿ç¨‹å…·æœ‰ä¸€è‡´çš„å±æ€§è®¾ç½®ï¼Œå¦‚åç§°ã€ä¼˜å…ˆçº§å’Œæ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚

**å¢å¼ºå¯ç»´æŠ¤æ€§**ï¼šå°†çº¿ç¨‹åˆ›å»ºé€»è¾‘ä»ä¸šåŠ¡ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä½¿ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“ç»´æŠ¤ã€‚

**æé«˜å¯æ‰©å±•æ€§**ï¼šé€šè¿‡è‡ªå®šä¹‰çº¿ç¨‹å·¥å‚ï¼Œå¯ä»¥è½»æ¾æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ—¥å¿—è®°å½•ã€å¼‚å¸¸å¤„ç†å’Œçº¿ç¨‹ç»„ç®¡ç†ã€‚

## åŸºæœ¬çš„çº¿ç¨‹å·¥å‚å®ç°
é»˜è®¤çš„çº¿ç¨‹å·¥å‚å®ç°ï¼ˆExecutors.defaultThreadFactory()ï¼‰åˆ›å»ºçš„çº¿ç¨‹æ²¡æœ‰ç‰¹åˆ«çš„å±æ€§è®¾ç½®ã€‚å¯ä»¥é€šè¿‡å®ç°ThreadFactoryæ¥å£æ¥å®šåˆ¶çº¿ç¨‹çš„åˆ›å»ºè¿‡ç¨‹ã€‚

1. **å®ç°****ThreadFactory****æ¥å£**ï¼šå®šä¹‰ä¸€ä¸ªç±»å®ç°ThreadFactoryæ¥å£ï¼Œå¹¶é‡å†™newThreadæ–¹æ³•ã€‚
2. **è®¾ç½®çº¿ç¨‹å±æ€§**ï¼šåœ¨newThreadæ–¹æ³•ä¸­ï¼Œåˆ›å»ºæ–°çš„çº¿ç¨‹å¹¶è®¾ç½®å…¶å±æ€§ï¼Œå¦‚åç§°ã€ä¼˜å…ˆçº§å’Œæ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚

```plain
import java.util.concurrent.ThreadFactory;
import java.util.concurrent.atomic.AtomicInteger;

public class CustomThreadFactory implements ThreadFactory {
    private final AtomicInteger threadNumber = new AtomicInteger(1);
    private final String namePrefix;
    private final boolean daemon;
    private final int priority;

    public CustomThreadFactory(String namePrefix, boolean daemon, int priority) {
        this.namePrefix = namePrefix;
        this.daemon = daemon;
        this.priority = priority;
    }

    @Override
    public Thread newThread(Runnable r) {
        Thread thread = new Thread(r, namePrefix + "-thread-" + threadNumber.getAndIncrement());
        thread.setDaemon(daemon);
        thread.setPriority(priority);
        return thread;
    }
}
```

## æ‰©å±•å’Œä¼˜åŒ–çº¿ç¨‹å·¥å‚
ä¸ºäº†ä½¿çº¿ç¨‹å·¥å‚æ›´åŠ å¼ºå¤§å’Œçµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ æ›´å¤šåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š

### æ—¥å¿—è®°å½•
è®°å½•æ¯ä¸ªçº¿ç¨‹çš„åˆ›å»ºè¿‡ç¨‹ï¼Œä¾¿äºè°ƒè¯•å’Œç›‘æ§ã€‚

```plain
import java.util.logging.Level;
import java.util.logging.Logger;

public class EnhancedThreadFactory extends CustomThreadFactory {
    private static final Logger logger = Logger.getLogger(EnhancedThreadFactory.class.getName());

    public EnhancedThreadFactory(String namePrefix, boolean daemon, int priority) {
        super(namePrefix, daemon, priority);
    }

    @Override
    public Thread newThread(Runnable r) {
        Thread thread = super.newThread(r);
        logger.log(Level.INFO, "Created new thread: {0}", thread.getName());
        return thread;
    }
}
```

### çº¿ç¨‹ç»„ç®¡ç†
å°†çº¿ç¨‹å½’ç±»åˆ°ç‰¹å®šçš„çº¿ç¨‹ç»„ä¸­ï¼Œä¾¿äºç®¡ç†å’Œæ§åˆ¶ã€‚

```plain
public class GroupedThreadFactory extends CustomThreadFactory {
    private final ThreadGroup group;

    public GroupedThreadFactory(String namePrefix, boolean daemon, int priority, ThreadGroup group) {
        super(namePrefix, daemon, priority);
        this.group = group;
    }

    @Override
    public Thread newThread(Runnable r) {
        Thread thread = new Thread(group, r, namePrefix + "-thread-" + threadNumber.getAndIncrement());
        thread.setDaemon(daemon);
        thread.setPriority(priority);
        return thread;
    }
}
```

### ä½¿ç”¨è‡ªå®šä¹‰çº¿ç¨‹å·¥å‚
é€šè¿‡è‡ªå®šä¹‰çš„çº¿ç¨‹å·¥å‚åˆ›å»ºçº¿ç¨‹æ± ï¼Œç¡®ä¿çº¿ç¨‹å…·æœ‰ä¸€è‡´çš„å±æ€§è®¾ç½®ã€‚

```plain
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class ThreadFactoryExample {
    public static void main(String[] args) {
        CustomThreadFactory threadFactory = new CustomThreadFactory("CustomPool", false, Thread.NORM_PRIORITY);
        ExecutorService executorService = Executors.newFixedThreadPool(5, threadFactory);

        for (int i = 0; i < 10; i++) {
            executorService.submit(() -> {
                String threadName = Thread.currentThread().getName();
                System.out.println("Hello from " + threadName);
            });
        }

        executorService.shutdown();
    }
}
```





> åŸæ–‡: <https://www.yuque.com/jingdianjichi/xyxdsi/fk90v5e2dg1tw4ar>