# 👌TCP 如何保证可靠性？

1. **三次握手（Three-Way Handshake）**：
    - 在建立连接时，TCP使用三次握手来确保双方都准备好进行通信。
    - 过程如下：
        1. 客户端发送一个SYN（同步）包到服务器，表示请求建立连接。
        2. 服务器收到SYN包后，回复一个SYN-ACK（同步-确认）包，表示同意建立连接。
        3. 客户端收到SYN-ACK包后，发送一个ACK（确认）包，表示连接建立成功。
1. **序列号和确认机制（Sequence Numbers and Acknowledgments）**：
    - 每个TCP段（数据包）都有一个序列号，接收方使用该序列号来重组数据并检测丢失的包。
    - 接收方在收到数据后，会发送一个ACK（确认）包，告知发送方已成功接收的数据序列号。
    - 如果发送方在一定时间内没有收到ACK包，会重传该数据包。
2. **重传机制（Retransmission Mechanism）**：
    - TCP使用超时重传机制，如果发送方在超时时间内没有收到ACK包，会重传该数据包。
    - TCP还使用快速重传机制，当接收方检测到数据包丢失时，会立即通知发送方进行重传，而不必等待超时。
3. **流量控制（Flow Control）**：
    - 使用滑动窗口机制来控制数据流量，确保发送方不会发送超过接收方处理能力的数据量。
    - 滑动窗口大小由接收方在ACK包中告知发送方，发送方根据窗口大小调整发送速率。
4. **拥塞控制（Congestion Control）**：
    - TCP使用多种算法（如慢启动、拥塞避免、快速重传和快速恢复）来检测和避免网络拥塞。
    - 这些算法通过调整发送速率，防止网络过载，从而减少数据包丢失和延迟。
5. **数据校验和（Checksum）**：
    - 每个TCP段都包含一个校验和字段，用于检测数据在传输过程中是否被损坏。
    - 接收方计算接收到的数据的校验和并与发送方的校验和进行比较，如果不匹配，则认为数据损坏并丢弃该段。



> 原文: <https://www.yuque.com/jingdianjichi/xyxdsi/wmx9omvt87p2dall>