# 👌HTTP的长连接和短连接区别？

HTTP 的长连接（Persistent Connection）和短连接（Non-Persistent Connection）是指在 HTTP 协议中，客户端和服务器之间的 TCP 连接的使用方式。它们的主要区别在于连接的保持时间和复用方式。

### 短连接（HTTP/1.0 默认）
+ **定义**：短连接是一种在每次请求和响应之后立即关闭 TCP 连接的方式。
+ **工作流程**：
    1. 客户端发起一个 HTTP 请求。
    2. 服务器处理请求并发送响应。
    3. 服务器关闭 TCP 连接。
    4. 如果客户端需要再次请求数据，必须重新建立一个新的 TCP 连接。
+ **优点**：
    - 实现简单。
    - 资源释放及时。
+ **缺点**：
    - 每次请求都需要重新建立和关闭 TCP 连接，增加了连接建立的开销（如三次握手和四次挥手），影响性能。
    - 对服务器和网络的负担较大，尤其是在大量短时间请求的情况下。

### 长连接（HTTP/1.1 默认）
+ **定义**：长连接是一种在多次请求和响应之间保持 TCP 连接打开的方式，允许复用同一个连接进行多个请求和响应。
+ **工作流程**：
    1. 客户端发起一个 HTTP 请求，并在请求头中包含`Connection: keep-alive`（HTTP/1.1 默认即为长连接）。
    2. 服务器处理请求并发送响应，同时保持连接打开。
    3. 客户端可以在同一个连接上发送后续请求，服务器继续响应。
    4. 连接在一段时间内保持打开状态，直到客户端或服务器主动关闭连接，或超时关闭。
+ **优点**：
    - 减少了连接建立和关闭的开销，提高了传输效率。
    - 减少了网络和服务器的负担，适合频繁的请求和响应。
+ **缺点**：
    - 需要管理长时间保持的连接，增加了资源管理的复杂性。
    - 可能会占用服务器资源，尤其是在大量长时间未关闭的连接情况下。

### 使用场景
+ **短连接**：
    - 适用于简单的、一次性的请求，如一些简单的 API 调用。
    - 适用于对资源占用较为敏感的环境，避免长时间占用连接资源。
+ **长连接**：
    - 适用于需要频繁通信的场景，如网页加载、实时数据传输等。
    - 适用于需要减少连接建立和关闭开销的场景，提高整体性能。



> 原文: <https://www.yuque.com/jingdianjichi/xyxdsi/hwc7iqmlzyciuhox>